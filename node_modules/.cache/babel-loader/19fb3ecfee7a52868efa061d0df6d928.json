{"ast":null,"code":"import _slicedToArray from\"C:/Users/\\u05E1\\u05D8\\u05D5\\u05D3\\u05D9\\u05D5\\u05DC'\\u05D4 \\u05E6\\u05D9\\u05DC\\u05D5\\u05DD/Documents/GitHub/around-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"C:/Users/\\u05E1\\u05D8\\u05D5\\u05D3\\u05D9\\u05D5\\u05DC'\\u05D4 \\u05E6\\u05D9\\u05DC\\u05D5\\u05DD/Documents/GitHub/around-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import\"../index.css\";import Header from\"./Header\";import Main from\"./Main\";import Footer from\"./Footer\";import React from\"react\";import ImagePopup from\"./ImagePopup\";import EditProfilePopup from\"./EditProfilePopup\";import AddPlacePopup from\"./AddPlacePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import api from\"../utils/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){React.useEffect(function(){api.getInitialCards().then(function(initialCards){return setCards(_toConsumableArray(initialCards));}).catch(console.log);api.getInitialProfile().then(setCurrentUser).catch(console.log);},[]);var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),currentUser=_React$useState2[0],setCurrentUser=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),cards=_React$useState4[0],setCards=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatarPopupOpen=_React$useState6[0],setIsEditAvatarPopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isAddPlacePopupOpen=_React$useState8[0],setIsAddPlacePopupOpen=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),isEditProfileOpen=_React$useState10[0],setIsEditProfileOpen=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),isImagePopupOpen=_React$useState12[0],setIsImagePopupOpen=_React$useState12[1];var _React$useState13=React.useState({}),_React$useState14=_slicedToArray(_React$useState13,2),selectedCard=_React$useState14[0],setSelectedCard=_React$useState14[1];function closeAllPopups(){setIsEditProfileOpen(false);setIsEditAvatarPopupOpen(false);setIsAddPlacePopupOpen(false);setIsImagePopupOpen(false);}function handleCardClick(card){setSelectedCard(card);setIsImagePopupOpen(true);}function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfileOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(console.log);}function handleUpdateUser(user){api.patchProfileInfo(user).then(function(userData){setCurrentUser(userData);closeAllPopups();}).catch(console.log);}function handleUpdateAvatar(_ref){var avatar=_ref.avatar;api.changeProfileImg(avatar).then(function(userData){setCurrentUser(userData);closeAllPopups();}).catch(console.log);}function handleAddPlaceSubmit(card){return api.postCard(card).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(console.log);}function handleRemoveClick(card){api.deleteCard(card._id).then(function(){setCards(function(state){return state.filter(function(c){return c._id!==card._id;});});}).catch(console.log);}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"root\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditAvatarClick:handleEditAvatarClick,onEditProfileClick:handleEditProfileClick,onAddPlaceClick:handleAddPlaceClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onRemoveClick:handleRemoveClick,cards:cards}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfileOpen,onClose:closeAllPopups,onUserInfoUpdate:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlaceSubmit:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(ImagePopup,{name:\"display-image\",card:selectedCard,isOpen:isImagePopupOpen,onClose:closeAllPopups})]})})});}export default App;","map":{"version":3,"sources":["C:/Users/סטודיול'ה צילום/Documents/GitHub/around-react/src/components/App.js"],"names":["Header","Main","Footer","React","ImagePopup","EditProfilePopup","AddPlacePopup","EditAvatarPopup","CurrentUserContext","api","App","useEffect","getInitialCards","then","initialCards","setCards","catch","console","log","getInitialProfile","setCurrentUser","useState","currentUser","cards","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditProfileOpen","setIsEditProfileOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","closeAllPopups","handleCardClick","card","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardLike","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","state","map","c","handleUpdateUser","user","patchProfileInfo","userData","handleUpdateAvatar","avatar","changeProfileImg","handleAddPlaceSubmit","postCard","handleRemoveClick","deleteCard","filter"],"mappings":"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","sourcesContent":["import \"../index.css\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport React from \"react\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nimport api from \"../utils/api\";\n\nfunction App() {\n  React.useEffect(() => {\n    api\n      .getInitialCards()\n      .then((initialCards) => setCards([...initialCards]))\n      .catch(console.log);\n    api.getInitialProfile().then(setCurrentUser).catch(console.log);\n  }, []);\n\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\n    React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditProfileOpen, setIsEditProfileOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n\n  function closeAllPopups() {\n    setIsEditProfileOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImagePopupOpen(false);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setIsImagePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfileOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch(console.log);\n  }\n\n  function handleUpdateUser(user) {\n    api\n      .patchProfileInfo(user)\n      .then((userData) => {\n        setCurrentUser(userData);\n        closeAllPopups();\n      })\n      .catch(console.log);\n  }\n\n  function handleUpdateAvatar({ avatar }) {\n    api\n      .changeProfileImg(avatar)\n      .then((userData) => {\n        setCurrentUser(userData);\n        closeAllPopups();\n      })\n      .catch(console.log);\n  }\n\n  function handleAddPlaceSubmit(card) {\n    return api\n      .postCard(card)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(console.log);\n  }\n  function handleRemoveClick(card) {\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n      })\n      .catch(console.log);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n        <div className=\"root\">\n          <Header />\n          <Main\n            onEditAvatarClick={handleEditAvatarClick}\n            onEditProfileClick={handleEditProfileClick}\n            onAddPlaceClick={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onRemoveClick={handleRemoveClick}\n            cards={cards}\n          />\n\n          <Footer />\n          <EditProfilePopup\n            isOpen={isEditProfileOpen}\n            onClose={closeAllPopups}\n            onUserInfoUpdate={handleUpdateUser}\n          />\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlaceSubmit={handleAddPlaceSubmit}\n          />\n\n          <ImagePopup\n            name=\"display-image\"\n            card={selectedCard}\n            isOpen={isImagePopupOpen}\n            onClose={closeAllPopups}\n          ></ImagePopup>\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}